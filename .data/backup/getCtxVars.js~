var transform = require('transform');
var options = {
    "location": "local:///context-variables.xsl",
    'xmldom': XML.parse('<dummy/>')
};

transform.xslt(options, function(error, nodelist, abortinfo) {
  if (error) {
    session.output.write(error);
  }
  else {
    var i, j, ctxs, obj={};
    ctxs=nodelist.item(0).getElementsByTagName("context");
    for(i=0; i<ctxs.length; ++i) {
        var ctx = ctxs.item(i);
        var arr = [];
        var vars=ctx.getElementsByTagName("variable");
        for(j=0; j<vars.length; ++j) {
          arr.push(vars.item(j).textContent);
        }
        obj[ctx.getAttribute('name')]=arr;
    }
    session.output.write(obj);
  }
});
